{"componentChunkName":"component---src-templates-blog-post-js","path":"/HTTP/http-상태코드에-대하여/","result":{"data":{"site":{"siteMetadata":{"title":"white-gyu Logs","author":"white-gyu","siteUrl":"https://white-gyu.github.io","sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"d03ec30b-037e-5790-be13-ffa36a872a61","excerpt":"HTTP Status Code (상태 코드) HTTP 요청이 성공했는지, 실패했는지를 서버에서 알려주는 코드 2XX Success 2xx 번대의 상태 코드는 서버가 클라이언트 요청을 성공적으로 처리했다는 것을 의미 200 OK 서버가 클라이언트의 요청을 정상적으로 처리 는 클라이언트에게 요청이 성공했다는 것을 응답하는 기능을 갖기 때문에 성공에 대한 모든 상태 코드를 20…","html":"<h2 id=\"http-status-code-상태-코드\" style=\"position:relative;\"><a href=\"#http-status-code-%EC%83%81%ED%83%9C-%EC%BD%94%EB%93%9C\" aria-label=\"http status code 상태 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTTP Status Code (상태 코드)</h2>\n<blockquote>\n<p>HTTP 요청이 성공했는지, 실패했는지를 서버에서 알려주는 코드</p>\n</blockquote>\n<h3 id=\"2xx-success\" style=\"position:relative;\"><a href=\"#2xx-success\" aria-label=\"2xx success permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2XX Success</h3>\n<p>2xx 번대의 상태 코드는 <strong>서버가 클라이언트 요청을 성공적으로 처리</strong>했다는 것을 의미</p>\n<h3 id=\"200-ok\" style=\"position:relative;\"><a href=\"#200-ok\" aria-label=\"200 ok permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>200 OK</h3>\n<blockquote>\n<p>서버가 클라이언트의 요청을 정상적으로 처리</p>\n</blockquote>\n<p><code class=\"language-text\">200 상태 코드</code>는 클라이언트에게 요청이 성공했다는 것을 응답하는 기능을 갖기 때문에 성공에 대한 모든 상태 코드를 200으로 응답해도 크게 상관없다. 하지만 클라이언트에게 더 정확하고 자세한 정보를 제공하기 위해선 적절한 상태 코드를 보내는 것이 좋다.<br>\n2xx 상태 코드들은 <strong>각각 세분화된 목적</strong>을 갖는다.</p>\n<h3 id=\"201-created\" style=\"position:relative;\"><a href=\"#201-created\" aria-label=\"201 created permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>201 Created</h3>\n<blockquote>\n<p>클라이언트의 요청을 서버가 정상적으로 처리했고 새로운 리소스가 생겼다.</p>\n</blockquote>\n<p><code class=\"language-text\">201 상태 코드</code>는 <strong>POST</strong>, <strong>PUT</strong> 요청에 대한 응답에 주로 사용된다.\n클라이언트의 요청이 성공적으로 이뤄졌다는 의미까지는 200과 동일한데, 성공과 동시에 <strong>새로운 리소스가 생성</strong>되었다는 의미를 포함한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">POST /users HTTP/<span class=\"token number\">1.1</span>\nContent-Type<span class=\"token operator\">:</span> application/json\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hak\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">HTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">201</span> Created\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"hak\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>물론 새로운 리소스를 생성하는 POST, PUT 요청의 응답으로 200을 보내줘도 된다.<br>\n하지만 <strong>더 정확한 의미를 전달하기 위해 201 상태 코드를 쓸 것을 추천</strong>한다.</p>\n<blockquote>\n<p>HTTP 헤더의 Content-Location를 이용하여 만들어진 리소스 생성된 위치를 알려주면 더할 나위 없이 좋다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">HTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">201</span> Created\nContent-Location<span class=\"token operator\">:</span> /users/<span class=\"token number\">1</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"hak\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"202-accepted\" style=\"position:relative;\"><a href=\"#202-accepted\" aria-label=\"202 accepted permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>202 Accepted</h3>\n<blockquote>\n<p>클라이언트의 요청은 정상적이나, 서버가 아직 요청을 완료하지 못했다.<br>\n작업 완료를 위한 일련의 작업들이 오래 걸리기 때문에 나중에 알려주겠다는 의미</p>\n</blockquote>\n<p><code class=\"language-text\">202 상태 코드</code>에서 중요한 것은 <strong>작업의 확인</strong>이다. 비동기 작업은 해당 요청이 언제 완료되는지 알 수 없다.<br>\n클라이언트가 요청의 완료 여부를 확인할 수 있는 방법을 제공해야 한다. 2가지 방법이 있다.</p>\n<blockquote>\n<ol>\n<li>Callback : 서버가 작업이 완료되면 클라이언트에게 알려주는 것</li>\n<li>Polling : 클라이언트가 주기적으로 해당 작업의 상태를 조회하는 것(HATEOAS, Content-Location 등으로 작업의 상태를 확인할 수 있는 URI를 응답)</li>\n</ol>\n</blockquote>\n<p>결론은 비동기 요청은 콜백이든 폴링이든 <strong>클라이언트가 요청의 완료 여부를 확인할 수 있는 방법을 제공</strong>해야 한다는 것이다.<br>\n둘 다 제공하는 것이 좋다.</p>\n<h3 id=\"204-no-content\" style=\"position:relative;\"><a href=\"#204-no-content\" aria-label=\"204 no content permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>204 No Content</h3>\n<blockquote>\n<p>클라이언트의 요청은 정상적이다. 하지만 컨텐츠를 제공하지 않는다.</p>\n</blockquote>\n<p><code class=\"language-text\">204 상태 코드</code>는 <strong>자원의 삭제 요청</strong>에 응답할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token request-line\"><span class=\"token method property\">DELETE</span> <span class=\"token request-target url\">/users/1</span> <span class=\"token http-version property\">HTTP/1.1</span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">204</span> <span class=\"token reason-phrase string\">No Content</span></span></code></pre></div>\n<p>자원 삭제 요청을 했고 이 요청이 유효하니 서버는 해당 자원을 삭제했다. <strong>더 이상 응답할 컨텐츠가 없기</strong> 때문에 컨텐츠가 없는 204로 응답한다.<br>\n여기서 주의할 점은 <strong>200으로 응답하고 응답 body에 null, {}, [], false 등으로 응답하는 것과 다르다</strong>는 것이다.<br>\n<strong>204의 경우 HTTP Response body가 아예 존재하지 않는 경우</strong>다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PUT\n    - 자원 수정 요청의 결과가 기존의 자원 내용과 동일하여 변경된 내용이 없을 때 204로 응답 가능\n    - 만약 수정 요청으로 자원의 내용이 변경된다면 201로 응답\n\nDELETE\n    - 삭제 요청으로 자원을 삭제하여 더 이상 존재하지 않고 그 자원을 참조하는 모든 자원도 삭제되어 더 이상 HTTP body를 응답하는 것이 무의미해졌을 때 사용</code></pre></div>\n<h3 id=\"4xx-client-errors\" style=\"position:relative;\"><a href=\"#4xx-client-errors\" aria-label=\"4xx client errors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4XX Client Errors</h3>\n<p><code class=\"language-text\">4XX</code>의 상태 코드들은 <strong>클라이언트의 요청이 유효하지 않아 서버가 해당 요청을 수행하지 않았다</strong>는 의미다.</p>\n<h3 id=\"400-bad-request\" style=\"position:relative;\"><a href=\"#400-bad-request\" aria-label=\"400 bad request permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>400 Bad Request</h3>\n<blockquote>\n<p>클라이언트의 요청이 유효하지 않아 더 이상 작업을 진행하지 않는 경우</p>\n</blockquote>\n<p>대부분의 API는 사전에 유효성 검증을 통해 400 상태 코드로 클라이언트에게 유효하지 않은 요청임을 응답한다.<br>\n유효성 검증 없이 진행하면 5xx 서버 오류가 발생할 수 있기 때문에 대부분 사전에 막는 로직을 추가한다.<br>\n오류 발생 시 <strong>파라미터의 위치(path, query, body), 사용자 입력 값, 에러 이유를 꼭 명시</strong>하는 것이 좋다.</p>\n<p><strong>Bad</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">400</span> <span class=\"token reason-phrase string\">Bad Request</span></span></code></pre></div>\n<p><strong>Good case 1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">HTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">400</span> Bad Request\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"'name'(body) must be String, input 'name': 123\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Good case 2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">HTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">400</span> Bad Request\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"errors\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"body\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"param\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"error\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"TypeError\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"msg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"must be String\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Good case 3</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">HTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">400</span> Bad Request\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"errors\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"'name'(body) must be String, input 'name': 123\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"detail\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"body\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"param\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"error\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"TypeError\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"msg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"must be String\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>   \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"401-unauthorized\" style=\"position:relative;\"><a href=\"#401-unauthorized\" aria-label=\"401 unauthorized permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>401 Unauthorized</h3>\n<blockquote>\n<p>클라이언트가 권한이 없기 때문에 작업을 진행할 수 없는 경우</p>\n</blockquote>\n<p>401 상태 코드는 <code class=\"language-text\">비인증</code>이다. 상태 코드 이름만 보면 권한(authorized)에 대한 내용처럼 보이지만, 사실 <code class=\"language-text\">인증(authenticated)</code>에 대한 이야기다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">비인증: 非, Not\n    - 비인증은 아니다의 뜻이 강하다. 즉, 인증이 안된 상태\n\n미인증: 未, Not enough\n    - 미인증은 부족하다의 뜻이 강하다. 즉, 권한이 부족한 상태</code></pre></div>\n<p>결론적으로 <code class=\"language-text\">401</code>은 <strong>인증이 안돼 자원을 이용할 수 없는 상태</strong>고, 의미상 <code class=\"language-text\">unauthenticated</code>가 더 정확하다.</p>\n<h3 id=\"403-forbidden\" style=\"position:relative;\"><a href=\"#403-forbidden\" aria-label=\"403 forbidden permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>403 Forbidden</h3>\n<blockquote>\n<p>클라이언트가 권한이 없기 때문에 작업을 진행할 수 없는 경우</p>\n</blockquote>\n<p><code class=\"language-text\">403</code>은 <code class=\"language-text\">권한(authorized)</code>에 대한 내용이다.\n<code class=\"language-text\">401</code>의 상태 코드명이 Unauthorized라 혼동의 여지가 있으나, <code class=\"language-text\">권한</code>에 대한 내용이다.\n<strong>인증된 클라이언트가 권한이 없는 자원에 접근할 때 응답하는 상태 코드</strong>다.</p>\n<h3 id=\"404-not-found\" style=\"position:relative;\"><a href=\"#404-not-found\" aria-label=\"404 not found permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>404 Not Found</h3>\n<blockquote>\n<p>클라이언트가 요청한 자원이 존재하지 않는 경우</p>\n</blockquote>\n<p>브라우저(클라이언트) 입장에선 자원이 웹 페이지 경로고 <strong>존재하지 않는 경로(자원)를 요청</strong>했기 때문에 404 상태 코드를 응답했다.<br>\nREST API에선 크게 두 가지 경우에서 404 상태 코드를 응답한다.</p>\n<ol>\n<li>경로가 존재하지 않음  </li>\n<li>자원이 존재하지 않음</li>\n</ol>\n<p>REST 입장에서 생각을 해야 한다.\n대부분 API 프레임워크에선 경로(라우팅)에 대한 에러 처리를 해준다. 즉, 존재하지 않은 경로는 쉽게 404로 응답할 수 있다. <code class=\"language-text\">GET</code> <code class=\"language-text\">/users/abc/def/wow</code> 경우 아예 존재하지 않는 경로다</p>\n<p>그러나 <code class=\"language-text\">자원의 경우</code>는 개발자가 처리해줘야 한다.\n<code class=\"language-text\">PUT</code> <code class=\"language-text\">/users/1</code> 경우 <code class=\"language-text\">/users/:id</code>로 존재하는 경로다. 또한 <code class=\"language-text\">:id</code>엔 숫자 값이 오고 요청도 숫자기 때문에 400 Bad Request도 아니다. 이때 서버는 <code class=\"language-text\">ID = 1</code>을 갖는 사용자가 있는지 먼저 확인을 해야 한다. 이것이 <strong>자원에 대한 존재 여부</strong>를 파악하는 것이다. 만약, 존재 여부를 파악하지 않고 그대로 진행을 하면 후속 작업에서 오류가 발생할 가능성이 있고 이것은 5XX 오류로 이어질 수 있다. 즉, <strong>존재하는 경로에 대한 요청이라도 자원이 존재하는지 파악 후, 존재하지 않는다면 404 상태 코드로 응답</strong>해야 한다.</p>\n<h3 id=\"405-method-not-allowed\" style=\"position:relative;\"><a href=\"#405-method-not-allowed\" aria-label=\"405 method not allowed permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>405 Method Not Allowed</h3>\n<blockquote>\n<p>클라이언트의 요청이 허용되지 않는 메소드인 경우</p>\n</blockquote>\n<p>메소드란 <code class=\"language-text\">POST</code>, <code class=\"language-text\">GET</code>, <code class=\"language-text\">PUT</code>, <code class=\"language-text\">DELETE</code> 등 <code class=\"language-text\">HTTP Method</code><br>\n즉, 자원(URI)은 존재하지만 <strong>해당 자원이 지원하지 않는 메소드</strong>일 때 응답하는 상태 코드다.</p>\n<p><code class=\"language-text\">405 상태 코드</code>는 <strong>OPTIONS 메소드</strong>와 <strong>HTTP header의 Allow</strong>와 연관되어있다.</p>\n<p><code class=\"language-text\">OPTIONS</code>는 <strong>API가 허용하는 메소드</strong>가 어떤 것들이 있는지 확인하는 메소드다. 405 오류를 사전에 방지하기 위한 용도에 주로 쓰인다.<br>\n이 때 응답 HTTP header의 Allow에 지원하는 메소드를 나열하여 응답한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token request-line\"><span class=\"token method property\">OPTIONS</span> <span class=\"token request-target url\">/users/1</span> <span class=\"token http-version property\">HTTP/1.1</span></span>\n<span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">200</span> <span class=\"token reason-phrase string\">OK</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Allow</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">GET,PUT,DELETE,OPTIONS,HEAD</span></span></code></pre></div>\n<p><code class=\"language-text\">/users/1</code> 자원은 <code class=\"language-text\">POST</code> 메소드를 제공하지 않는다는 정보를 확인할 수 있다.</p>\n<h3 id=\"409-conflict\" style=\"position:relative;\"><a href=\"#409-conflict\" aria-label=\"409 conflict permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>409 Conflict</h3>\n<blockquote>\n<p>클라이언트의 요청이 서버의 상태와 충돌이 발생한 경우<br>\n해당 요청의 처리 중 비지니스 로직상 불가능하거나 모순이 생긴 경우</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token request-line\"><span class=\"token method property\">DELETE</span> <span class=\"token request-target url\">/users/1</span> <span class=\"token http-version property\">HTTP/1.1</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">X-TOKEN</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">password</span></span></code></pre></div>\n<ul>\n<li>자원(URI) /users/1에 존재하는 메소드 → 405 X</li>\n<li>/users/:id에서 :id가 유효한 형식 → 400 X</li>\n<li>사용자도 존재 → 404 X</li>\n<li>헤더의 인증(X-TOKEN)도 정확 → 401 X</li>\n<li>삭제 권한도 있는 경우 → 403 X</li>\n</ul>\n<p>클라이언트의 삭제 요청은 받아들여져서 200 혹은 204로 응답해야 하지만, <strong>사용자의 게시물이 존재하는 경우 사용자를 삭제할 수 없다는 비지니스 로직</strong>이 있을 수 있다. 이렇게 API 사용에 있어 <strong>비지니스 로직상 모순이 발생하여 처리가 불가능한 경우 응답하는 상태 코드</strong>다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">409</span> <span class=\"token reason-phrase string\">Conflict</span></span></code></pre></div>\n<p>400 오류 상황과 마찬가지로 <strong>응답 시 오류의 원인</strong>을 알려야 한다.<br>\nHATEOAS를 이용해 <strong>클라이언트가 다음 상태로 전이될 수 있는 링크를 함께 응답</strong>하면 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">HTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">409</span> Conflict\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"First, delete posts\"</span>\n    <span class=\"token property\">\"links\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"rel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"posts.delete\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"DELETE\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://api.rest.com/v1/users/1/posts\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"5xx-server-errors\" style=\"position:relative;\"><a href=\"#5xx-server-errors\" aria-label=\"5xx server errors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5XX Server Errors</h3>\n<p><code class=\"language-text\">5XX</code> 상태 코드들은 <strong>서버 오류</strong>로 인해 요청을 수행할 수 없다는 의미다.</p>\n<p>특히 <code class=\"language-text\">500</code> 에러는 개발자의 실수로 발생할 여지가 크다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">POST /users HTTP/<span class=\"token number\">1.1</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>요청에 대해 4XX 오류를 발생시킬 가능성이 있는데 사전에 확인 작업을 하지 않은 경우</li>\n<li>파라미터 필수 값, 유효성 확인 없이 비지니스 로직 진행하는 경우</li>\n<li>외부 API에서 받은 객체를 확인하지 않고 비지니스 로직 진행하는 경우</li>\n</ul>\n<p>params에 name이 존재하는지 판단하지 않고 개발한 경우 <strong>클라이언트의 요청이 무조건 유효할 것이라 판단하고 개발하는 경우 오류를 발생</strong>시킬 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">params <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>json\ncreate<span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>최신의 웹 애플리케이션 프레임워크는 자체 웹서버를 내장하고 있어서 웹서버(Apache, Nginx) 없이 운영할 수 있다. 그러나 보통 운영 레벨에서 이렇게 하는 경우는 드물고 <strong>앞에 웹서버를 두고 웹 애플리케이션을 연결해서 운영</strong>한다.\n따라서 상단의 웹서버(Apache, Nginx)에서 발생하는 어쩔 수 없는 오류를 제외하고 <strong>API에선 5XX 상태 코드가 응답되선 안된다</strong>. <strong>API 레벨에선 완벽한 예외처리를 통해 5XX 서버 오류 상태 코드를 방지</strong>해야 한다.</p>\n<h2 id=\"참고-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\"참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고 자료</h2>\n<p><a href=\"https://sanghaklee.tistory.com/61#recentEntries\">REST API 관점에서 바라보는 HTTP 상태 코드(HTTP status code)</a></p>","frontmatter":{"title":"HTTP 상태코드에 대하여","date":"March 04, 2022"}}},"pageContext":{"slug":"/HTTP/http-상태코드에-대하여/","previous":{"fields":{"slug":"/Mysql/db-정규화란/"},"frontmatter":{"title":"DB 정규화란"}},"next":{"fields":{"slug":"/Spring/restful의-hateoas에-대해-알아보자/"},"frontmatter":{"title":"RestFul의 Hateoas에 대해 알아보자"}}}},"staticQueryHashes":["2486386679","3128451518"]}